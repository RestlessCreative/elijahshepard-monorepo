function initC0re(){if(mainNav("B"),initButtons(),initFancybox(),logos(),$("#black-hole").length>0){if($(".list-view").length>0){var e=$("#landing-web");$("#active-content #loadWrapper").html($(e).html()),TweenMax.fromTo($("#active-content #loadWrapper"),.3,{css:{autoAlpha:0,top:500}},{css:{autoAlpha:1}}),TweenMax.to($("#active-content .hero-content"),.1,{css:{autoAlpha:1,className:"+=current"}}),pauseVideos()}$(".single-view").length>0&&(TweenMax.fromTo($("#active-content #loadWrapper"),.3,{css:{autoAlpha:0,top:500}},{css:{autoAlpha:1}}),TweenMax.to($("#active-content .hero-content"),.1,{css:{autoAlpha:1,className:"+=current"}}),pauseVideos()),filtering(),c0re__listItems(),work()}if($("#eye-candy").length>0,setTimeout(function(){setElements()},10),mainTimeline(),contentAnimations(),is_firefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&setTimeout(function(){firefoxFixes()},500),"CSS"in window&&"supports"in window.CSS){var t=window.CSS.supports("mix-blend-mode","soft-light");t=t?"mix-blend-mode":"no-mix-blend-mode"}windowWidth<=1440&&$("body").addClass("small");$(window).innerWidth();$(window).smartresize(function(){if(logos(),"/"!=window.location.pathname){$(window).innerWidth()}setTimeout(function(){setElements()},100)}),$(".materialboxed").materialbox(),$(".parallax").parallax(),$(".collapsible").collapsible({accordion:!0}),$(".tabs").tabs(),$(".overlayClose").click(function(){$("#overlayVideo").css("opacity","0"),$("#overlayFailed").css("opacity","0"),$("#mobileNav .subNav a, #mobileNav .subNav span ").css("pointer-events","none"),setTimeout(function(){$("#overlayVideo").css("display","none")},500),setTimeout(function(){$("#overlayFailed").css("display","none")},500),$("#youtubeVideo").attr("src",""),$("body").removeClass("overlayOpen"),setElements()}),$(function(){$(".callModal").on("click",function(){$("body").addClass("modal-open")}),$(".modal-fade-screen, .modal-close").on("click",function(){$("body").removeClass("modal-open")}),$(".modal-inner").on("click",function(e){e.stopPropagation()})}),$(".modal").modal({dismissible:!0,opacity:.25,inDuration:300,outDuration:200,startingTop:"4%",endingTop:"5%",ready:function(e,t){},complete:function(){}}),$(".modal-trigger").each(function(){$(this).click(function(){var e=$(this).attr("data-target");$("#"+e).modal("open")})}),$(".close-modal").each(function(){$(this).click(function(){$(this).parents(".modal").modal("close")})}),$(".inputs").keyup(function(){if(this.value.length==this.maxLength){var e=$(this).next(".inputs");e.length?$(this).next(".inputs").focus():$(this).blur()}}),$(".validation_error").each(function(){var e=$(this).parents("form");$("html, body").animate({scrollTop:e.offset().top},1e3)}),$("#black-hole").length>0&&$(".continue").click(function(){}),$("#about").length>0&&$(".continue").click(function(){}),$("#toTop").click(function(){$("html, body").animate({scrollTop:0},1e3)});var i=!1;$(window).debounce("scroll",function(e){i=!0;$(window).scrollTop(),$(document).height(),$(window).height();setMasks(),setElements()},150),$("#eye-candy").length>0}function filtering(){var e={$filterGroups:null,$filterUi:null,$reset:null,groups:[],outputArray:[],outputString:"",init:function(){var e=this;e.$filterUi=$("#theFilters"),e.$filterGroups=$(".filter-group"),e.$reset=$("#resetFilters"),e.$container=$(".mixContainer"),e.$filterGroups.each(function(){e.groups.push({$inputs:$(this).find("input"),active:[],tracker:!1})}),e.bindHandlers()},bindHandlers:function(){var e=this,t=300,i=-1,a=function(){$(window).keydown(function(e){if(13==e.keyCode)return e.preventDefault(),!1}),clearTimeout(i),i=setTimeout(function(){e.parseFilters()},t)};e.$filterGroups.filter(".checkboxes").on("change",function(){e.parseFilters()}),e.$filterGroups.filter(".search").on("keyup change",a),e.$reset.on("click",function(t){t.preventDefault(),e.$filterUi[0].reset(),e.$filterUi.find('input[type="text"]').val(""),e.parseFilters()})},parseFilters:function(){for(var e,t=this,i=0;e=t.groups[i];i++)e.active=[],e.$inputs.each(function(){var t="",i=$(this),a=3;i.is(":checked")&&(e.active.push(this.value),$(this).parent(".checkbox").addClass("active")),i.is('[type="text"]')&&this.value.length>=a&&(t=this.value.trim().toLowerCase().replace(" ","-"),e.active[0]='[class*="'+t+'"]')}),e.active.length&&(e.tracker=0);t.concatenate()},concatenate:function(){var e=this,t="",i=!1,a=function(){for(var t,i=0,a=0;t=e.groups[a];a++)t.tracker===!1&&i++;return i<e.groups.length},n=function(){for(var i,a=0;i=e.groups[a];a++)i.active[i.tracker]&&(t+=i.active[i.tracker]),a===e.groups.length-1&&(e.outputArray.push(t),t="",o())},o=function(){for(var t=e.groups.length-1;t>-1;t--){var a=e.groups[t];if(a.active[a.tracker+1]){a.tracker++;break}t>0?a.tracker&&(a.tracker=0):i=!0}};e.outputArray=[];do n();while(!i&&a());e.outputString=e.outputArray.join(),!e.outputString.length&&(e.outputString="all"),console.log(e.outputString),e.$container.mixItUp("isLoaded")&&e.$container.mixItUp("filter",e.outputString)}};$(function(){e.init(),$(".mixContainer").mixItUp({controls:{enable:!1}}),setTimeout(function(){var e=new Blazy({selector:".b-lazy",offset:100});e.revalidate()},1e3)}),$(".section-filters .more").on("click",function(){$(".available-filters").toggle();var e=$(".section-filters").find('input[type="checkbox"]');e.is(":checked")?($(".section-filters").addClass("filters-active"),$(this).data("data-tooltip","You've got filters active. You aren't seeing EVERYTHING!"),$(".section-filters .more").tooltip()):($(".section-filters").removeClass("filters-active"),$(this).attr("data-tooltip","Just like coffee, you can FILTER IT."),$(".section-filters .more").tooltip()),$(this).toggleClass("active")}),$(".available-filters").mouseenter(function(){$(".available-filters").show(),$(".section-filters .more").addClass("active")}).mouseleave(function(){}),$("#resetFilters").on("click",function(e){e.preventDefault(),$(".available-filters").hide(),$(".section-filters").removeClass("filters-active"),$(".section-filters .more").attr("data-tooltip","Just like coffee, you can FILTER IT."),$(".section-filters .more").tooltip(),$(".section-filters .more").removeClass("active");var t=$("#resultsWrapper");$("html, body").animate({scrollTop:t.offset().top},100,function(){var e=new Blazy({selector:".b-lazy",offset:0});setTimeout(function(){e.revalidate()},200)})}),$(".filters-close").on("click",function(e){e.preventDefault(),$(".available-filters").hide();var t=$(".section-filters").find('input[type="checkbox"]');if(t.is(":checked")){$(".section-filters").addClass("filters-active"),$(".section-filters .more").attr("data-tooltip","You've got filters active. You aren't seeing EVERYTHING!"),$(".section-filters .more").tooltip();var i=$("#resultsWrapper");$("html, body").animate({scrollTop:i.offset().top},100);var a=new Blazy({selector:".b-lazy",offset:0});setTimeout(function(){a.revalidate()},100),TweenMax.staggerTo($(".current_count"),.1,{css:{scale:2,color:"#7ed4d4"},onComplete:function(){TweenMax.staggerTo($(".current_count"),.05,{css:{scale:1,color:"#b0b0b0"}},.25)}});var n=1;TweenMax.fromTo($(".filterUpdateMessage"),.1,{autoAlpha:0},{autoAlpha:1}),TweenMax.to($(".filterUpdateMessage i"),n/4,{delay:1,x:5,ease:Power2.easeOut}),TweenMax.to($(".filterUpdateMessage i"),n/2,{x:0,ease:Bounce.easeOut,delay:n/4}),TweenMax.to($(".filterUpdateMessage i"),n/2,{x:2,ease:Bounce.easeOut,delay:n/4}),TweenMax.to($(".filterUpdateMessage i"),n/4,{delay:.5,x:-2,ease:Power2.easeOut}),TweenMax.to($(".filterUpdateMessage"),.25,{delay:5,autoAlpha:0})}else $(".section-filters .more").removeClass("active"),$(".section-filters").removeClass("filters-active"),$(".section-filters .more").attr("data-tooltip","Just like coffee, you can FILTER IT."),$(".section-filters .more").tooltip()}),$(".filter-status").on("click",function(){$("#resetFilters").trigger("click"),$(".section-filters").removeClass("filters-active"),$(this).hide()}),$("#list-web").on("mixEnd",function(e,t){var i=($("#list-web .featured-wrapper .mix").length,$("#list-web .credits-a-z .mix")),a=(t.totalShow,$(i).filter(function(){return"none"!==$(this).css("display")}).length);if(0==a)var n=0;else var n=a;$(".current_count.web").html(n)}),$("#list-film-tv").on("mixEnd",function(e,t){var i=($("#list-film-tv .featured-wrapper .mix").length,$("#list-film-tv .credits-a-z .mix")),a=(t.totalShow,$(i).filter(function(){return"none"!==$(this).css("display")}).length);if(0==a)var n=0;else var n=a;$(".current_count.film-tv").html(n)}),$("#list-games").on("mixEnd",function(e,t){var i=($("#list-games .featured-wrapper .mix").length,$("#list-games .credits-a-z .mix")),a=(t.totalShow,$(i).filter(function(){return"none"!==$(this).css("display")}).length);if(0==a)var n=0;else var n=a;$(".current_count.games").html(n)}),$("#list-other").on("mixEnd",function(e,t){var i=($("#list-other .featured-wrapper .mix").length,$("#list-other .credits-a-z .mix")),a=(t.totalShow,$(i).filter(function(){return"none"!==$(this).css("display")}).length);if(0==a)var n=0;else var n=a;$(".current_count.other").html(n)}),$("#category-switcher .tab a").on("click",function(){var e=$(this).attr("rel");if($("#category-switcher").attr("data-status","switching"),$(window).innerWidth()<=1440&&$("body,html").animate({scrollTop:0},150),$("#black-hole").length>0){var t=$("#list-"+e);$.when($(".mixContainer").removeClass("active")).then(t.addClass("active")),pauseVideos();var i=$("#landing-"+e+" .supplemental");$("#active-content .supplemental").html($(i).html());var a=$("#landing-"+e+" h1").text(),n=$("#active-content h1");TweenMax.to(n,.3,{text:a,speed:.3,ease:Linear.easeNone,revealDelay:.25});var o=$("#landing-"+e+" .hero-container"),s=$("#active-content .hero-container .hero-content");TweenMax.to(s,.4,{x:-400,autoAlpha:0,onComplete:function(){$.when($("#active-content .hero-container").html($(o).html())).then(function(){var e=$("#active-content .hero-content");TweenMax.fromTo(e,.4,{x:700},{delay:.25,autoAlpha:1,x:0,ease:Expo.easeInOut})})},ease:Expo.easeIn});var r=document.getElementById("landing-"+e),l=r.getElementsByClassName("meta-wrapper")[0],c=$("#active-content .content-leader .meta-wrapper");$(c).html($(l).html());var f=$("#landing-"+e+" .active-background");if($(f).hasClass("hasBg")){var h=$(f).find(".background-container"),u=$(".c0re__content .background-container").not(".targetBg");$(h).addClass("targetBg");var d=function(){return $(".c0re__content .active-background").append(h)};$.when(d()).done(function(){var e=$(".c0re__content .active-background .targetBg");TweenMax.to(u,.5,{scale:1.5,autoAlpha:0}),TweenMax.fromTo(e,.4,{scale:1.3,autoAlpha:0},{scale:1,autoAlpha:1}),setTimeout(function(){$(u).remove(),TweenMax.to(e,0,{css:{className:"-=targetBg"}})},100)})}else $(".c0re__content #active-background .background-container").attr("data-src",""),$(".c0re__content #active-background .background-container").css("background-image","")}var p=new Blazy({selector:".b-lazy",offset:100});setTimeout(function(){p.revalidate()},300),setTimeout(function(){$("#category-switcher").attr("data-status","")},1e3)})}function c0re__listItems(){$(".c0re__list-item a").on("click",function(e){e.preventDefault();var t=$(this),i=$(this).parent(".c0re__list-item").siblings("li"),a=$(this).attr("href");TweenMax.to(i,1,{css:{className:"-=active"}},0),TweenMax.to(t,1,{css:{className:"+=active"}},0),replaceStage(a)})}function replaceStage(e){$("#data-container #incoming").load(e+" #loadWrapper",function(){pauseVideos(),($(window).innerWidth()<=1440||$(window).innerHeight()<=1100)&&$("body,html").animate({scrollTop:0},150);var t=$("#incoming .landing-content").attr("data-project");$("#active-content .landing-content").attr("data-project",t);var i=$("#incoming .supplemental");$("#active-content .supplemental").html($(i).html());var a=$("#incoming h1").text(),n=$("#active-content h1");TweenMax.to(n,.3,{text:a,speed:.3,ease:Linear.easeNone,revealDelay:.25});var o=$("#incoming .hero-container"),s=$("#active-content .hero-container .hero-content");TweenMax.to(s,.4,{x:-400,autoAlpha:0,onComplete:function(){$.when($("#active-content .hero-container").html($(o).html())).then(function(){var e=$("#active-content .hero-content");TweenMax.fromTo(e,.4,{x:700},{delay:.25,autoAlpha:1,x:0,ease:Expo.easeInOut})})},ease:Expo.easeIn});var r=document.getElementById("incoming"),l=r.getElementsByClassName("meta-wrapper")[0],c=$("#active-content .content-leader .meta-wrapper");$(c).html($(l).html()),$(".c0re__view").addClass("single-view"),$(".c0re__view").removeClass("list-view"),window.history&&window.history.pushState&&history.pushState("",document.name,e)}),$("#data-container #incoming-bg").load(e+" #active-background",function(){var e=$("#incoming-bg .active-background");if($(e).hasClass("hasBg")){var t=$(e).find(".background-container"),i=$(".c0re__content .background-container").not(".targetBg");$(t).addClass("targetBg");var a=function(){return $(".c0re__content .active-background").append(t)};$.when(a()).done(function(){var e=$(".c0re__content .active-background .targetBg");TweenMax.to(i,.5,{scale:1.5,autoAlpha:0}),TweenMax.fromTo(e,.4,{scale:1.3,autoAlpha:0},{scale:1,autoAlpha:1}),setTimeout(function(){$(i).remove(),TweenMax.to(e,0,{css:{className:"-=targetBg"}})},100)})}else $(".c0re__content #active-background .background-container").attr("data-src",""),$(".c0re__content #active-background .background-container").css("background",""),$(".c0re__content #active-background .background-container").css("background-image","")})}function pauseVideos(){clearTimeout(playVideos),$.when($("video").each(function(){this.pause()})).then(playVideos)}function playVideos(){setTimeout(function(){if($("#active-content .hero-container video").length>0){var e=0,t=$("#active-content .hero-container .hero-content video").get(0);$("#active-content .hero-container .hero-content .vid-overlay").css("opacity","0"),t.play(),t.addEventListener("ended",function(){e<3?(this.currentTime=0,this.play(),e++):$("#active-content .hero-container .hero-content .vid-overlay").css("opacity","1")},!1)}},2150)}function firefoxFixes(){}function createCookie(e,t,i){if(i){var a=new Date;a.setTime(a.getTime()+24*i*60*60*1e3);var n="; expires="+a.toGMTString()}else var n="";document.cookie=e+"="+t+n+"; path=/"}function readCookie(e){for(var t=e+"=",i=document.cookie.split(";"),a=0;a<i.length;a++){for(var n=i[a];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null}function eraseCookie(e){createElementteCookie(e,"",-1)}function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=i.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}function addParameter(e,t,i){var a=new RegExp("(\\?|\\&)"+t+"=.*?(?=(&|$))"),n=/\?.+$/;return a.test(e)?e.replace(a,"$1"+t+"="+i):n.test(e)?e+"&"+t+"="+i:e+"?"+t+"="+i}function getPosition(e){for(var t=0,i=0;e;){if("body"==e.tagName){var a=e.scrollLeft||document.documentElement.scrollLeft,n=e.scrollTop||document.documentElement.scrollTop;t+=e.offsetLeft-a+e.clientLeft,i+=e.offsetTop-n+e.clientTop}else t+=e.offsetLeft-e.scrollLeft+e.clientLeft,i+=e.offsetTop-e.scrollTop+e.clientTop;e=e.offsetParent}return{x:t,y:i}}function printMousePos(e){document.body.textContent="clientX: "+e.clientX+" - clientY: "+e.clientY}function mainTimeline(){var e=readCookie("skipIntro");masterTimeline=new TimelineMax({paused:!0}),null==e?(createCookie("skipIntro","ElijahShepard.Com","Cookie sets whether to display the main site intro animation."),windowWidth<$mobile?(masterTimeline.from($("#sound-control"),.5,{css:{autoAlpha:0,scale:0},ease:Expo.easeOut},1.7).to($(".c0re__transition-wrapper .left"),1,{css:{left:"-100%"},ease:Back.easeOut},1).to($(".c0re__transition-wrapper .right"),1,{css:{right:"-100%"},ease:Back.easeOut},1).to($(".c0re__loader-wrapper"),.5,{autoAlpha:0},1).from($("#c0re__outer"),.5,{css:{autoAlpha:0}},.5).from($(".c0re__view"),.5,{css:{autoAlpha:0,bottom:-100}},1).from($(".c0re__footer"),.8,{css:{autoAlpha:0},ease:Elastic.easeInOut},1.5).staggerFrom($("#main-nav a"),.3,{scale:0},.1),masterTimeline.fromTo($("#elijah #e"),.4,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"+=0.25").fromTo($("#elijah #l"),.4,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.25").fromTo($("#elijah #i"),.4,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.25").fromTo($("#elijah #j"),.3,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.3").fromTo($("#elijah #a"),.3,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.3").fromTo($("#elijah #h"),.2,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.35")):(masterTimeline.from($("#sound-control"),.5,{css:{autoAlpha:0,scale:0},ease:Expo.easeOut},1.7).to($(".c0re__transition-wrapper .left"),1,{css:{left:"-100%"},ease:Back.easeOut},1).to($(".c0re__transition-wrapper .right"),1,{css:{right:"-100%"},ease:Back.easeOut},1).to($(".c0re__loader-wrapper"),.5,{autoAlpha:0},1).from($("#c0re__outer"),.5,{css:{autoAlpha:0}},.5).from($(".c0re__view"),.5,{css:{autoAlpha:0,bottom:-100}},1).from($(".c0re__footer"),.8,{css:{autoAlpha:0},ease:Elastic.easeInOut},1.5).staggerFrom($("#main-nav a"),.3,{scale:0},.1),masterTimeline.fromTo($("#elijah #e"),.4,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"+=0.25").fromTo($("#elijah #l"),.4,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.25").fromTo($("#elijah #i"),.4,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.25").fromTo($("#elijah #j"),.3,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.3").fromTo($("#elijah #a"),.3,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.3").fromTo($("#elijah #h"),.2,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.35"))):windowWidth<$mobile?(masterTimeline.from($("#sound-control"),.5,{css:{autoAlpha:0,scale:0},ease:Expo.easeOut},1.7).to($(".c0re__transition-wrapper .left"),1,{css:{left:"-100%"},ease:Back.easeOut},1).to($(".c0re__transition-wrapper .right"),1,{css:{right:"-100%"},ease:Back.easeOut},1).to($(".c0re__loader-wrapper"),.5,{autoAlpha:0},1).from($("#c0re__outer"),.5,{css:{autoAlpha:0}},.5).from($(".c0re__view"),.5,{css:{autoAlpha:0,bottom:-100}},1).from($(".c0re__footer"),.8,{css:{autoAlpha:0},ease:Elastic.easeInOut},1.5).staggerFrom($("#main-nav a"),.3,{scale:0},.1),masterTimeline.fromTo($("#elijah #e"),.4,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"+=0.25").fromTo($("#elijah #l"),.4,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.25").fromTo($("#elijah #i"),.4,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.25").fromTo($("#elijah #j"),.3,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.3").fromTo($("#elijah #a"),.3,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.3").fromTo($("#elijah #h"),.2,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.35")):(masterTimeline.from($("#sound-control"),.5,{css:{autoAlpha:0,scale:0},ease:Expo.easeOut},1.7).to($(".c0re__transition-wrapper .left"),1,{css:{left:"-100%"},ease:Back.easeOut},1).to($(".c0re__transition-wrapper .right"),1,{css:{right:"-100%"},ease:Back.easeOut},1).to($(".c0re__loader-wrapper"),.5,{autoAlpha:0},1).from($("#c0re__outer"),.5,{css:{autoAlpha:0}},.5).from($(".c0re__view"),.5,{css:{autoAlpha:0,bottom:-100}},1).from($(".c0re__footer"),.8,{css:{autoAlpha:0},ease:Elastic.easeInOut},1.5).staggerFrom($("#main-nav a"),.3,{scale:0},.1),masterTimeline.fromTo($("#elijah #e"),.4,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"+=0.25").fromTo($("#elijah #l"),.4,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.25").fromTo($("#elijah #i"),.4,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.25").fromTo($("#elijah #j"),.3,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.3").fromTo($("#elijah #a"),.3,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.3").fromTo($("#elijah #h"),.2,{css:{fill:"#000000"}},{css:{fill:"#ffffff"}},"-=0.35")),masterTimeline.timeScale(2.75),masterTimeline.play()}function webGL(){}function reloadContentLeader(){var e=$("#active-content .landing-content").attr("data-project");if($(".single-view").length>0&&$("#black-hole").length>0&&""!=e&&!$("#incoming").is(":empty")){var t=$("#incoming .supplemental");$("#active-content .supplemental").empty(),$("#active-content .supplemental").html($(t).html());var i=$("#incoming h1").text(),a=$("#active-content h1");TweenMax.to(a,.5,{text:i,speed:.3,ease:Linear.easeNone,revealDelay:.25});var n=$("#incoming .hero-container"),o=$("#active-content .hero-container .hero-content.current");TweenMax.to(o,.2,{x:-400,autoAlpha:0,ease:Expo.easeIn,onComplete:function(){o.remove()}}),$.when($("#active-content .hero-container").append($(n).html())).then(function(){var e=$("#active-content .hero-content").not(".current");TweenMax.fromTo(e,.4,{x:700},{delay:.25,autoAlpha:1,x:0,ease:Expo.easeOut,onComplete:function(){var e=$("#active-content .hero-content").not(".current");e.addClass("current")}})});var s=document.getElementById("incoming"),r=s.getElementsByClassName("meta-wrapper")[0],l=$("#active-content .content-leader .meta-wrapper");$("#active-content .meta-wrapper").length>0?$(l).html($(r).html()):$(l).append(r.outerHTML);var c=$("#incoming .content-leader .description").html(),f=$("#active-content .content-leader .description");TweenMax.to(f,.1,{text:c}),$("#active-content .hero-container video").each(function(){this.play()})}}function reloadContentLeaderWithCategory(){$("#incoming").html($("#active-content .landing-content").html());var e=$("#category-switcher .active").attr("rel");$("#landing-"+e);$("#active-content .supplemental").empty();var t=$("#landing-"+e+" h1").text(),i=$("#active-content h1");TweenMax.to(i,.5,{text:t,speed:.3,ease:Linear.easeNone,revealDelay:.25});var a=$("#landing-"+e+" .content-leader .description").html(),n=$("#active-content .content-leader .description");TweenMax.to(n,.1,{text:a});var o=document.getElementById("landing-"+e),s=o.getElementsByClassName("meta-wrapper")[0],r=$("#active-content .content-leader .meta-wrapper");$("#active-content .meta-wrapper").length>0?$(r).html($(s).html()):$(r).append(s.outerHTML)}function contentAnimations(){var e=new ScrollMagic.Controller,t="#resultsWrapper";$(t).length&&($(".mixContainer.active .featured-wrapper .mix .metaThumb").each(function(t,i){var a=TweenMax.from(i,.15,{top:75,autoAlpha:0,ease:Expo.easeOut});new ScrollMagic.Scene({triggerElement:i,offset:40,triggerHook:"onEnter",reverse:!0}).setTween(a).addTo(e)}),$(".mixContainer.active .credits-a-z .mix").each(function(t,i){var a=TweenMax.from(i,.15,{top:75,autoAlpha:0,ease:Expo.easeOut});new ScrollMagic.Scene({triggerElement:i,offset:60,triggerHook:"onEnter",reverse:!0}).setTween(a).addTo(e)}));var i="#the-blahg";$(i).length&&$(".blahg-item").each(function(t,i){var a=TweenMax.from(i,.15,{top:75,autoAlpha:0,delay:.3,ease:Expo.easeOut});new ScrollMagic.Scene({triggerElement:i,offset:40,triggerHook:"onEnter",reverse:!0}).setTween(a).addTo(e)});var a="#about";$(a).length&&$(".legacy").each(function(t,i){var a=TweenMax.from(i,.15,{top:75,autoAlpha:0,delay:.3,ease:Expo.easeOut});new ScrollMagic.Scene({triggerElement:i,offset:50,triggerHook:"onEnter",reverse:!0}).setTween(a).addTo(e)}),$("#logo").on("mouseenter",function(){logoAnimation=new TimelineMax({paused:!0}),logoAnimation.fromTo($("#elijah #e"),.7,{css:{fill:"#ffffff"}},{css:{fill:"#3a4141"}},"+=0").fromTo($("#elijah #l"),.6,{css:{fill:"#ffffff"}},{css:{fill:"#3a4141"}},"-=0.25").fromTo($("#elijah #i"),.6,{css:{fill:"#ffffff"}},{css:{fill:"#3a4141"}},"-=0.25").fromTo($("#elijah #j"),.5,{css:{fill:"#ffffff"}},{css:{fill:"#3a4141"}},"-=0.25").fromTo($("#elijah #a"),.4,{css:{fill:"#ffffff"}},{css:{fill:"#3a4141"}},"-=0.25").fromTo($("#elijah #h"),.3,{css:{fill:"#ffffff"}},{css:{fill:"#3a4141"}},"-=0.25"),logoAnimation.timeScale(4.5).play()}),$("#logo").on("mouseleave",function(){logoAnimation.timeScale(5).reverse()})}function logos(){if($("#brand-experience").length>0)if($(window).innerWidth()<=768){var e=TweenMax.fromTo(".logos_1",27.5,{backgroundPosition:"0"},{repeat:-1,backgroundPosition:"-1100px",ease:SteppedEase.config(11)}),t=TweenMax.fromTo(".logos_2",19,{backgroundPosition:"0"},{repeat:-1,backgroundPosition:"-1100px",ease:SteppedEase.config(11)}),i=TweenMax.fromTo(".logos_3",22.5,{backgroundPosition:"0"},{repeat:-1,backgroundPosition:"-1100px",ease:SteppedEase.config(11)}),a=TweenMax.fromTo(".logos_4",25,{backgroundPosition:"0"},{repeat:-1,backgroundPosition:"-1100px",ease:SteppedEase.config(11)});e.timeScale(1).delay(1).play(0),t.timeScale(1).delay(1).play(0),i.timeScale(1).delay(1).play(0),a.timeScale(1).delay(1).play(0),console.log("sarah")}else if($(window).innerWidth()>768){var e=TweenMax.fromTo(".logos_1",27.5,{backgroundPosition:"0"},{repeat:-1,backgroundPosition:"-2200px",ease:SteppedEase.config(11)}),t=TweenMax.fromTo(".logos_2",19,{backgroundPosition:"0"},{repeat:-1,backgroundPosition:"-2200px",ease:SteppedEase.config(11)}),i=TweenMax.fromTo(".logos_3",22.5,{backgroundPosition:"0"},{repeat:-1,backgroundPosition:"-2200px",ease:SteppedEase.config(11)}),a=TweenMax.fromTo(".logos_4",25,{backgroundPosition:"0"},{repeat:-1,backgroundPosition:"-2200px",ease:SteppedEase.config(11)});e.timeScale(1).delay(1).play(0),t.timeScale(1).delay(1).play(0),i.timeScale(1).delay(1).play(0),a.timeScale(1).delay(1).play(0),console.log("walker")}}function setMasks(){$(window).scrollTop();manageBackground()}function manageBackground(){$("#active-content .active-background").length>0?$("body").addClass("background-is-active"):$("body").removeClass("background-is-active")}function setElements(){setMasks();var e=$(window).innerHeight(),t=$(window).innerWidth(),i=$(".c0re__content").innerHeight(),a=($("#active-content").innerHeight(),$("#active-content .landing-content").innerHeight()),n=($(".hero-content img, .hero-content video").innerHeight(),$(".c0re__view, .viewport")),o=e-180;$(window).scrollTop();TweenMax.set(n,{css:{minHeight:o}}),$("#eye-candy").length>0&&TweenMax.set(n,{css:{minHeight:e}}),setTimeout(function(){i>=e?TweenMax.set($("#c0re__outer"),{css:{className:"+=scrollable"}}):TweenMax.set($("#c0re__outer"),{css:{className:"-=scrollable"}}),a>=e-180&&t>=1024?($("#black-hole").addClass("scrollable"),$("#black-hole .landing-content").removeClass("hasHeight")):e<1e3&&t>=1024?$("#black-hole").addClass("scrollable"):t<1024?($("#black-hole").removeClass("scrollable"),$("#black-hole .landing-content").removeClass("hasHeight"),TweenMax.set($("#active-content"),{css:{minHeight:o}})):a<e&&t>1024&&t<=1800?$("#black-hole .landing-content").addClass("hasHeight"):($("#black-hole").removeClass("scrollable"),$("#black-hole .landing-content").removeClass("hasHeight"))},175)}function loadPage(e){var t=$(window).scrollTop();t>0&&$("#navigation").addClass("scrolled")}function changeSectionVar(e){section=e}function expandHamNav(){$("#menu-icon").toggleClass("open");var e=$("#overlay-nav");TweenMax.fromTo(e,.3,{opacity:0},{opacity:1,display:"block"}),$("#navigation .brand-logo").hasClass("hideLogo")&&TweenMax.fromTo($("#navigation .brand-logo"),.2,{opacity:0},{opacity:1,scale:1}),$(".navigation-menu").is(":hidden")&&$(".navigation-menu").slideToggle(function(){$(".navigation-menu").removeAttr("style"),$("body").addClass("menuOpen")})}function closeHamNav(){$("#menu-icon").toggleClass("open");var e=$("#overlay-nav");if(TweenMax.fromTo(e,.3,{opacity:1},{opacity:0,display:"none"}),$("#navigation .brand-logo").hasClass("hideLogo")&&TweenMax.fromTo($("#navigation .brand-logo"),.2,{opacity:1},{opacity:0,scale:0}),$(".navigation-menu").is(":visible")){$(".navigation-menu").slideToggle(function(){$(".navigation-menu").removeAttr("style"),$("body").removeClass("menuOpen")});var e=$("#overlay-nav");TweenMax.fromTo(e,.3,{opacity:1},{opacity:0,display:"none"})}}function mainNav(e){function t(){this.animation.play()}function i(){var e=$(this).find(".submenu");e.hasClass("active")||this.animation.reverse()}function a(){this.animation.play()}function n(){this.animation.reverse()}$(".c0re__header .navigation-menu .nav-link").each(function(e,t){var i=new TimelineMax({paused:!0}),a=$(this),n=a.find(".submenu"),o=a.find(".destination"),s=a.find(".supplemental");a.siblings(),n.find("li");i.to(a,0,{css:{className:"+=active"}},0).to(o,.2,{css:{y:-8,ease:Expo.easeInOut}}).to(s,.25,{css:{y:8,autoAlpha:1,ease:Expo.easeInOut}}),i.timeScale(1),t.animation=i}),$(".c0re__header .navigation-menu .nav-link").hover(t,i),$(".c0re__header .navigation-menu .nav-link .submenu").each(function(e,t){var i=new TimelineMax({paused:!0}),a=$(this);i.to(a,0,{css:{className:"+=active"}},0),t.animation=i}),$(".c0re__header .navigation-menu .submenu").hover(a,n)}function initButtons(){var e=$(".c0re__header .nav-link a");$(e).on("click",function(e){e.preventDefault();var t=this.href,i=$(this).attr("data-target"),a=($(this).attr("data-name"),$(this).attr("data-name"),$(this).parent(".nav-link")),n=$(a).siblings();$("section[data-id="+i+"]");if($(n).find("a").removeClass("active"),$(this).addClass("active"),"_blank"==$(this).attr("target"))gotoPage(t);else{if($(this).parent("li").hasClass("has-dropdown"))return!1;closePage(t)}}),$("#pageSubNav").pushpin({top:705,offset:105}),$("#pageSubNav").length>0&&$("#pageSubNav").hasClass("pinned"),$(".c0re-scroll-down").on("click",function(e){e.preventDefault(),smoothScroll($(this.hash))})}function smoothScroll(e){$("body,html").animate({scrollTop:e.offset().top},600)}function gotoPage(e){window.open(e,"_blank")}function closePage(e){window.location=e}function inlineSVG(){jQuery("img.svg").each(function(){var e=jQuery(this),t=e.attr("id"),i=e.attr("class"),a=e.attr("src");jQuery.get(a,function(a){var n=jQuery(a).find("svg");"undefined"!=typeof t&&(n=n.attr("id",t)),"undefined"!=typeof i&&(n=n.attr("class",i+" replaced-svg")),n=n.removeAttr("xmlns:a"),e.replaceWith(n)},"xml")})}function gallery(){}function initFancybox(){$("[data-fancybox]").fancybox({protect:!0,loop:!1,keyboard:!0,toolbar:!0,mobile:{clickContent:function(e,t){return"image"===e.type&&"toggleControls"},clickSlide:function(e,t){return"image"===e.type?"toggleControls":"close"},dblclickContent:function(e,t){return"image"===e.type&&"zoom"},dblclickSlide:function(e,t){return"image"===e.type&&"zoom"}},media:{youtube:{params:{autoplay:0}}},slideShow:{autoStart:!0,speed:5e3},fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0}})}function work(){if($(".swiper-container").length>0){new Swiper(".swiper-container",{slidesPerView:"auto",centeredSlides:!1,spaceBetween:3})}}function phone(){}function swipeNav(){var e=document.getElementById("black-hole"),t=new Hammer.Manager(e);e.length>0&&(t.add(new Hammer.Pan({direction:Hammer.DIRECTION_HORIZONTAL,threshold:200,pointers:0})),t.on("panend",function(e){var t=$("#category-switcher .active"),i=$(t).parent("li").prev(".tab"),a=$(t).parent("li").next(".tab"),n=$(i).find("a"),o=$(a).find("a");e.direction==Hammer.DIRECTION_LEFT&&o.length>0&&$(o).trigger("click"),e.direction==Hammer.DIRECTION_RIGHT&&n.length>0&&$(n).click()}))}if($installDirectory=1,pathArray=window.location.pathname.split("/"),$mobile="1000",$small="1400",menuBreakpoint="983",footerOffset=100,headerOffset=100,onePageSections=[""],windowHeight=$(window).innerHeight(),windowWidth=$(window).innerWidth(),adjHeight=windowHeight/2,isTouch="ontouchstart"in window,isChrome=navigator.userAgent.indexOf("Chrome")>-1,isExplorer=navigator.userAgent.indexOf("MSIE")>-1,isFirefox=navigator.userAgent.indexOf("Firefox")>-1,isSafari=navigator.userAgent.indexOf("Safari")>-1,isCamino=navigator.userAgent.indexOf("Camino")>-1,isOpera=navigator.userAgent.toLowerCase().indexOf("op")>-1,isChrome&&isSafari&&(isSafari=!1),isChrome&&isOpera&&(isChrome=!1),$(document).ready(function(){initC0re()}),$("#ear-worms").length>0){!function(){function e(e){e=e||{},this.phase=0,this.run=!1,this.ratio=e.ratio||window.devicePixelRatio||1,this.width=this.ratio*(e.width||320),this.width_2=this.width/2,this.width_4=this.width/4,this.height=this.ratio*(e.height||100),this.height_2=this.height/2,
this.MAX=this.height_2-4,this.amplitude=e.amplitude||1,this.speed=e.speed||.2,this.frequency=e.frequency||6,this.color=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,i,a){return t+t+i+i+a+a});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?parseInt(i[1],16).toString()+","+parseInt(i[2],16).toString()+","+parseInt(i[3],16).toString():null}(e.color||"#fff")||"255,255,255",this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,e.cover?this.canvas.style.width=this.canvas.style.height="100%":(this.canvas.style.width=this.width/this.ratio+"px",this.canvas.style.height=this.height/this.ratio+"px"),this.container=e.container||document.body,this.container.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),e.autostart&&this.start()}return e.prototype._GATF_cache={},e.prototype._globAttFunc=function(t){return null==e.prototype._GATF_cache[t]&&(e.prototype._GATF_cache[t]=Math.pow(4/(4+Math.pow(t,4)),4)),e.prototype._GATF_cache[t]},e.prototype._xpos=function(e){return this.width_2+e*this.width_4},e.prototype._ypos=function(e,t){var i=this.MAX*this.amplitude/t;return this.height_2+this._globAttFunc(e)*i*Math.sin(this.frequency*e-this.phase)},e.prototype._drawLine=function(e,t,i){this.ctx.moveTo(0,0),this.ctx.beginPath(),this.ctx.strokeStyle=t,this.ctx.lineWidth=i||1;for(var a=-2;(a+=.01)<=2;){var n=this._ypos(a,e);Math.abs(a)>=1.9&&(n=this.height_2),this.ctx.lineTo(this._xpos(a),n)}this.ctx.stroke()},e.prototype._clear=function(){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="source-over"},e.prototype._draw=function(){if(this.run!==!1)return this.phase=(this.phase+Math.PI*this.speed)%(2*Math.PI),this._clear(),this._drawLine(-2,"rgba("+this.color+",0.1)"),this._drawLine(-6,"rgba("+this.color+",0.2)"),this._drawLine(4,"rgba("+this.color+",0.4)"),this._drawLine(2,"rgba("+this.color+",0.6)"),this._drawLine(1,"rgba("+this.color+",1)",1.5),window.requestAnimationFrame?void requestAnimationFrame(this._draw.bind(this)):void setTimeout(this._draw.bind(this),20)},e.prototype.start=function(){this.phase=0,this.run=!0,this._draw()},e.prototype.stop=function(){this.phase=0,this.run=!1},e.prototype.setSpeed=function(e){this.speed=e},e.prototype.setNoise=e.prototype.setAmplitude=function(e){this.amplitude=Math.max(Math.min(e,1),0)},"function"==typeof define&&define.amd?void define(function(){return e}):void(window.SiriWave=e)}();var elms=["track","timer","duration","playBtn","pauseBtn","prevBtn","nextBtn","playlistBtn","volumeBtn","progress","bar","wave","waveform","loading","playlist","list","volume","barEmpty","barFull","sliderBtn"];elms.forEach(function(e){window[e]=document.getElementById(e)});var Player=function(e){this.playlist=e,this.index=0,track.innerHTML="1. "+e[0].title,e.forEach(function(t){var i=document.createElement("div");i.className="list-song",i.innerHTML=t.title,i.onclick=function(){player.skipTo(e.indexOf(t))},list.appendChild(i)})};Player.prototype={play:function(e){var t,i=this;e="number"==typeof e?e:i.index;var a=i.playlist[e];a.howl?t=a.howl:(mediaURL="https://assets.elijahshepard.com/es-main/ear-worms/tracks/",t=a.howl=new Howl({src:[mediaURL+a.file+".webm",mediaURL+a.file+".mp3"],html5:!0,onplay:function(){duration.innerHTML=i.formatTime(Math.round(t.duration())),requestAnimationFrame(i.step.bind(i)),wave.container.style.display="block",bar.style.display="none",pauseBtn.style.display="block"},onload:function(){bar.style.display="none",loading.style.display="none"},onend:function(){wave.container.style.display="none",bar.style.display="block",i.skip("right")},onpause:function(){wave.container.style.display="none",bar.style.display="block"},onstop:function(){wave.container.style.display="none",bar.style.display="block"}})),t.play(),track.innerHTML=e+1+". "+a.title,"loaded"===t.state()?(playBtn.style.display="none",pauseBtn.style.display="block"):(loading.style.display="block",playBtn.style.display="none",pauseBtn.style.display="none"),i.index=e},pause:function(){var e=this,t=e.playlist[e.index].howl;t.pause(),playBtn.style.display="block",pauseBtn.style.display="none"},skip:function(e){var t=this,i=0;"prev"===e?(i=t.index-1,i<0&&(i=t.playlist.length-1)):(i=t.index+1,i>=t.playlist.length&&(i=0)),t.skipTo(i)},skipTo:function(e){var t=this;t.playlist[t.index].howl&&t.playlist[t.index].howl.stop(),progress.style.width="0%",t.play(e)},volume:function(e){Howler.volume(e);var t=90*e/100;barFull.style.width=100*t+"%",sliderBtn.style.left=window.innerWidth*t+.05*window.innerWidth-25+"px"},seek:function(e){var t=this,i=t.playlist[t.index].howl;i.playing()&&i.seek(i.duration()*e)},step:function(){var e=this,t=e.playlist[e.index].howl,i=t.seek()||0;timer.innerHTML=e.formatTime(Math.round(i)),progress.style.width=(i/t.duration()*100||0)+"%",t.playing()&&requestAnimationFrame(e.step.bind(e))},togglePlaylist:function(){var e="block"===playlist.style.display?"none":"block";setTimeout(function(){playlist.style.display=e},"block"===e?0:500),playlist.className="block"===e?"fadein":"fadeout"},toggleVolume:function(){var e="block"===volume.style.display?"none":"block";setTimeout(function(){volume.style.display=e},"block"===e?0:500),volume.className="block"===e?"fadein":"fadeout"},formatTime:function(e){var t=Math.floor(e/60)||0,i=e-60*t||0;return t+":"+(i<10?"0":"")+i}};var player=new Player([{title:"Rainwire",file:"rainwire",howl:null},{title:"Rainwire",file:"rainwire",howl:null},{title:"Rainwire",file:"rainwire",howl:null}]);playBtn.addEventListener("click",function(){player.play()}),pauseBtn.addEventListener("click",function(){player.pause()}),prevBtn.addEventListener("click",function(){player.skip("prev")}),nextBtn.addEventListener("click",function(){player.skip("next")}),waveform.addEventListener("click",function(e){player.seek(e.clientX/window.innerWidth)}),playlistBtn.addEventListener("click",function(){player.togglePlaylist()}),playlist.addEventListener("click",function(){player.togglePlaylist()}),volumeBtn.addEventListener("click",function(){player.toggleVolume()}),volume.addEventListener("click",function(){player.toggleVolume()}),barEmpty.addEventListener("click",function(e){var t=e.layerX/parseFloat(barEmpty.scrollWidth);player.volume(t)}),sliderBtn.addEventListener("mousedown",function(){window.sliderDown=!0}),sliderBtn.addEventListener("touchstart",function(){window.sliderDown=!0}),volume.addEventListener("mouseup",function(){window.sliderDown=!1}),volume.addEventListener("touchend",function(){window.sliderDown=!1});var move=function(e){if(window.sliderDown){var t=e.clientX||e.touches[0].clientX,i=.05*window.innerWidth,a=t-i,n=Math.min(1,Math.max(0,a/parseFloat(barEmpty.scrollWidth)));player.volume(n)}};volume.addEventListener("mousemove",move),volume.addEventListener("touchmove",move);var wave=new SiriWave({container:waveform,width:window.innerWidth,height:.3*window.innerHeight,cover:!0,speed:.03,amplitude:.7,frequency:2}),resize=function(){var e=.3*window.innerHeight,t=window.innerWidth;wave.height=e,wave.height_2=e/2,wave.MAX=wave.height_2-4,wave.width=t,wave.width_2=t/2,wave.width_4=t/4,wave.canvas.height=e,wave.canvas.width=t,wave.container.style.margin=-(e/2)+"px auto";var i=player.playlist[player.index].howl;if(i){var a=i.volume(),n=.9*a;sliderBtn.style.left=window.innerWidth*n+.05*window.innerWidth-25+"px"}};window.addEventListener("resize",resize),resize()}if($("#eye-candy").length>0){$(".candy-item").each(function(){$(this).mouseenter(function(){var e=$(this).find("img"),t=e.attr("data-src");e.attr("src",t)})}),$("#candy").mixItUp({load:{filter:".featured"},selectors:{target:".candy-item",filter:".filter",sort:".sort-btn"},animation:{animateResizeContainer:!1,effects:"fade scale"}});var AttractorPointCloudClass=function(e,t){this.material=new THREE.PointCloudMaterial({size:1,color:16777215,transparent:!0,opacity:.4,blending:THREE.AdditiveBlending}),this.pointCloud=new THREE.PointCloud(e,this.material),this.scene=t};AttractorPointCloudClass.prototype={add:function(){this.scene.add(this.pointCloud)},remove:function(){this.scene.remove(this.pointCloud)},update:function(e){e.position&&(this.pointCloud.position.x=e.position.x,this.pointCloud.position.y=e.position.y,this.pointCloud.position.z=e.position.z),e.rotation&&(this.pointCloud.rotation.x=e.rotation.x,this.pointCloud.rotation.y=e.rotation.y,this.pointCloud.rotation.z=e.rotation.z),e.scale&&(this.pointCloud.scale.x=e.scale.x,this.pointCloud.scale.y=e.scale.y,this.pointCloud.scale.z=e.scale.z)}};var AttractorLineClass=function(e){this.scene=e,this.geometry=new THREE.Geometry,this.material=new THREE.LineBasicMaterial({color:16777215,linewidth:.5,transparent:!0,opacity:.4}),this.line=new THREE.Line(this.geometry,this.material),this.param={position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}};AttractorLineClass.prototype={add:function(){this.scene.add(this.line)},remove:function(){this.scene.remove(this.line)},createVertices:function(e){this.geometry.vertices=[],this.geometry.vertices.push(new THREE.Vector3(1e4,0,0));for(var t=0;t<15;t++)this.geometry.vertices.push(e.vertices[parseInt(5e4*Math.random())]);this.geometry.vertices.push(new THREE.Vector3((-1e4),0,0))},update:function(e){e.position&&(this.line.position.x=e.position.x,this.line.position.y=e.position.y,this.line.position.z=e.position.z),e.rotation&&(this.line.rotation.x=e.rotation.x,this.line.rotation.y=e.rotation.y,this.line.rotation.z=e.rotation.z),e.scale&&(this.line.scale.x=1.2*e.scale.x,this.line.scale.y=1.2*e.scale.y,this.line.scale.z=1.2*e.scale.z)}};var AttractorGeometryClass=function(){this.value={x:0,y:0,z:0},this.p=[.6,1.15,.28,-.19,-.34,-.17,-.7,-.69,-.52,.39,-.96,.95,.3,-.43,.13,.41,1.14,-.65,-.84,.75,-.41],this.pFixed=[.6,1.15,.28,-.19,-.34,-.17,-.7,-.69,-.52,.39,-.96,.95,.3,-.43,.13,.41,1.14,-.65,-.84,.75,-.41],this.pnFlags=[];for(var e=0;e<this.pFixed.length;e++)this.pnFlags[e]=new closeValueClass(100,300);this.geometry=new THREE.Geometry};AttractorGeometryClass.prototype={returnGeometry:function(){return this.geometry},generate:function(){this.geometry.vertices=[],this.geometry.colors=[],this.value={x:0,y:0,z:0};for(var e=0;e<5e4;e++){this.value=this.recursive(this.value.x,this.value.y,this.value.z);var t=new THREE.Vector3;t.x=this.value.x-1.5,t.y=this.value.y-.25,t.z=this.value.z,this.geometry.vertices.push(t)}this.geometry.verticesNeedUpdate=!0},change:function(e){for(var t=0;t<this.p.length;t++)t%5==0&&(this.p[t]=this.pFixed[t]+.2*this.pFixed[t]*e*this.pnFlags[t].execution())},returnPN:function(){return Math.random()>=.5},recursive:function(e,t,i){return{x:this.p[0]+this.p[1]*e+this.p[2]*t+this.p[3]*i+this.p[4]*Math.abs(e)+this.p[5]*Math.abs(t)+this.p[6]*Math.abs(i),y:this.p[7]+this.p[8]*e+this.p[9]*t+this.p[10]*i+this.p[11]*Math.abs(e)+this.p[12]*Math.abs(t)+this.p[13]*Math.abs(i),z:this.p[14]+this.p[15]*e+this.p[16]*t+this.p[17]*i+this.p[18]*Math.abs(e)+this.p[19]*Math.abs(t)+this.p[20]*Math.abs(i)}}};var closeValueClass=function(e,t){this.flag=0,this.progress=0,this.startTime=0,this.durationTime=0,this.fromValue=0,this.toValue=0,this.minValue=0,this.maxValue=1,this.minDuration=e,this.maxDuration=t};closeValueClass.prototype={init:function(){return this.durationTime=this.minDuration+(this.maxDuration-this.minDuration)*Math.random(),this.startTime=Date.now(),this.progress=Math.min(1,(Date.now()-this.startTime)/this.durationTime),this.fromValue=this.toValue,this.toValue=this.minValue+this.maxValue*Math.random(),this.flag=1,this.fromValue+(this.toValue-this.fromValue)*this.progress},update:function(){return this.progress=Math.min(1,(Date.now()-this.startTime)/this.durationTime),1==this.progress&&(this.flag=0),this.fromValue+(this.toValue-this.fromValue)*this.progress},execution:function(){return 0==this.flag?this.init():1==this.flag?this.update():void 0}};var AudioDataClass=function(e){this.xml=new XMLHttpRequest,this.context=new AudioContext,this.audioURL=e,this.audioBuffer,this.sourceNode,this.channel=[],this.numberOfChannels=0,this.sampleRate=44100,this.loadCallback};AudioDataClass.prototype={init:function(e){var t=this;this.loadCallback=e,this.xml.open("GET",this.audioURL),this.xml.send(null),this.xml.responseType="arraybuffer",this.xml.onreadystatechange=function(e){t.changed(e)}},changed:function(e){var t=this;if(4==this.xml.readyState){var i=this.xml.response;i instanceof ArrayBuffer&&this.context.decodeAudioData(i,function(e){t.audioBuffer=e,t.sampleRate=t.context.sampleRate,t.numberOfChannels=e.numberOfChannels;for(var i=0;i<t.numberOfChannels;i++)t.channel.push(new Float32Array(e.length)),t.channel[i].set(e.getChannelData(i));"function"==typeof t.loadCallback&&(audioInitFlg=!0,t.loadCallback())},function(){})}},getVolume:function(e){for(var t=[],i=0;i<this.numberOfChannels;i++)t.push(this.channel[i][parseInt(e*this.sampleRate)]);return t},play:function(){this.sourceNode=this.context.createBufferSource(),this.sourceNode.buffer=this.audioBuffer,this.sourceNode.connect(this.context.destination),this.sourceNode.start(0)}},THREE.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var i=e.getPixelRatio(),a=Math.floor(e.context.canvas.width/i)||1,n=Math.floor(e.context.canvas.height/i)||1,o={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1};t=new THREE.WebGLRenderTarget(a,n,o)}this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader)},THREE.EffectComposer.prototype={swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2;var t,i,a=!1,n=this.passes.length;for(i=0;i<n;i++)if(t=this.passes[i],t.enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,a),t.needsSwap){if(a){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}t instanceof THREE.MaskPass?a=!0:t instanceof THREE.ClearMaskPass&&(a=!1)}},reset:function(e){if(void 0===e){e=this.renderTarget1.clone();var t=this.renderer.getPixelRatio();e.width=Math.floor(this.renderer.context.canvas.width/t),e.height=Math.floor(this.renderer.context.canvas.height/t)}this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){var i=this.renderTarget1.clone();i.width=e,i.height=t,this.reset(i)}},THREE.MaskPass=function(e,t){this.scene=e,this.camera=t,this.enabled=!0,this.clear=!0,this.needsSwap=!1,this.inverse=!1},THREE.MaskPass.prototype={render:function(e,t,i,a){var n=e.context;n.colorMask(!1,!1,!1,!1),n.depthMask(!1);var o,s;this.inverse?(o=0,s=1):(o=1,s=0),n.enable(n.STENCIL_TEST),n.stencilOp(n.REPLACE,n.REPLACE,n.REPLACE),n.stencilFunc(n.ALWAYS,o,4294967295),n.clearStencil(s),e.render(this.scene,this.camera,i,this.clear),e.render(this.scene,this.camera,t,this.clear),n.colorMask(!0,!0,!0,!0),n.depthMask(!0),n.stencilFunc(n.EQUAL,1,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)}},THREE.ClearMaskPass=function(){this.enabled=!0},THREE.ClearMaskPass.prototype={render:function(e,t,i,a){var n=e.context;n.disable(n.STENCIL_TEST)}},THREE.RenderPass=function(e,t,i,a,n){this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=a,this.clearAlpha=void 0!==n?n:1,this.oldClearColor=new THREE.Color,this.oldClearAlpha=1,this.enabled=!0,this.clear=!0,this.needsSwap=!1},THREE.RenderPass.prototype={render:function(e,t,i,a){this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),e.render(this.scene,this.camera,i,this.clear),this.clearColor&&e.setClearColor(this.oldClearColor,this.oldClearAlpha),this.scene.overrideMaterial=null}},THREE.ShaderPass=function(e,t){this.textureID=void 0!==t?t:"tDiffuse",this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.renderToScreen=!1,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.camera=new THREE.OrthographicCamera((-1),1,1,(-1),0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)},THREE.ShaderPass.prototype={render:function(e,t,i,a){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}},THREE.CopyShader={uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},THREE.InvertShader={uniforms:{tSize:{type:"v2",value:new THREE.Vector2(0,0)},tDiffuse:{type:"t",value:null}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D(tDiffuse, vUv);","gl_FragColor = vec4(1.0-texel.x, 1.0-texel.y, 1.0-texel.z, 1.0);","}"].join("\n")},THREE.cutslideHorizonalShader={uniforms:{tSize:{type:"v2",value:new THREE.Vector2(0,0)},tDiffuse:{type:"t",value:null},freqRand:{type:"f",value:0},slideRand:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float freqRand;","uniform float slideRand;","varying vec2 vUv;","void main() {","vec4 texel = texture2D(tDiffuse, vUv);","vec2 cs = vec2(floor(sin(vUv.y*freqRand))*slideRand, 0.0);","vec4 texel_cs = texture2D(tDiffuse, vUv + cs);","gl_FragColor = texel_cs;","}"].join("\n")},THREE.cutslideVerticalShader={uniforms:{tSize:{type:"v2",value:new THREE.Vector2(0,0)},tDiffuse:{type:"t",value:null},freqRand:{type:"f",value:0},slideRand:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float freqRand;","uniform float slideRand;","varying vec2 vUv;","void main() {","vec4 texel = texture2D(tDiffuse, vUv);","vec2 cs = vec2(0.0, floor(sin(vUv.x*freqRand))*slideRand);","vec4 texel_cs = texture2D(tDiffuse, vUv + cs);","gl_FragColor = texel_cs;","}"].join("\n")},THREE.ShakerShader={uniforms:{tSize:{type:"v2",value:new THREE.Vector2(0,0)},tDiffuse:{type:"t",value:null},rand:{type:"v2",value:new THREE.Vector2(0,0)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 rand;","varying vec2 vUv;","void main() {","vec4 texel = texture2D(tDiffuse, vUv+rand);","gl_FragColor = texel;","}"].join("\n")},THREE.RGBShiftShader={uniforms:{tDiffuse:{type:"t",value:null},ramount:{type:"f",value:0},gamount:{type:"f",value:0},bamount:{type:"f",value:0},rangle:{type:"f",value:0},gangle:{type:"f",value:0},bangle:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float ramount;","uniform float gamount;","uniform float bamount;","uniform float rangle;","uniform float gangle;","uniform float bangle;","varying vec2 vUv;","void main() {","vec2 roffset = ramount * vec2( cos(rangle), sin(rangle));","vec2 goffset = gamount * vec2( cos(gangle), sin(gangle));","vec2 boffset = bamount * vec2( cos(bangle), sin(bangle));","vec4 cr = texture2D(tDiffuse, vUv + roffset);","vec4 cg = texture2D(tDiffuse, vUv + goffset);","vec4 cb = texture2D(tDiffuse, vUv + boffset);","gl_FragColor = vec4(cr.r, cg.g, cb.b, 1.0);","}"].join("\n")};var camera,scene,renderer,composer,toScreen,effectCoefficientX,effectCoefficientY,volume=0,audioInitFlg=!1,initVisualizer=function(){camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,3e3),camera.position.z=1e3,scene=new THREE.Scene,renderer=new THREE.WebGLRenderer({antialias:!0,precision:"lowp"}),renderer.setSize(window.innerWidth,window.innerHeight),document.getElementById("bg-wrap").appendChild(renderer.domElement),window.addEventListener("resize",function(){renderer.setSize(window.innerWidth,window.innerHeight),camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix()},!1);var e=!1;effectCoefficientX=.5,effectCoefficientY=.5,window.addEventListener("mousedown",function(t){e=!0},!1),window.addEventListener("mousemove",function(t){e&&(effectCoefficientX=t.offsetX/window.innerWidth*2,effectCoefficientY=t.offsetY/window.innerHeight*2)},!1),window.addEventListener("mouseup",function(t){effectCoefficientX=1,effectCoefficientY=1,e=!1},!1),window.addEventListener("touchstart",function(t){e=!0},!1),window.addEventListener("touchmove",function(t){e&&(effectCoefficientX=t.touches[0].pageX/window.innerWidth*2,effectCoefficientY=t.touches[0].pageY/window.innerHeight*2)},!1),window.addEventListener("touchend",function(t){effectCoefficientX=1,effectCoefficientY=1,e=!1},!1),composer=new THREE.EffectComposer(renderer),composer.addPass(new THREE.RenderPass(scene,camera)),invertPass=new THREE.ShaderPass(THREE.InvertShader),invertPass.enabled=!1,composer.addPass(invertPass),cutslideHorizonalPass=new THREE.ShaderPass(THREE.cutslideHorizonalShader),cutslideHorizonalPass.enabled=!0,composer.addPass(cutslideHorizonalPass),cutslideVerticalPass=new THREE.ShaderPass(THREE.cutslideVerticalShader),cutslideVerticalPass.enabled=!0,composer.addPass(cutslideVerticalPass),shakerPass=new THREE.ShaderPass(THREE.ShakerShader),shakerPass.enabled=!0,composer.addPass(shakerPass),rgbShiftPass=new THREE.ShaderPass(THREE.RGBShiftShader),rgbShiftPass.enabled=!0,composer.addPass(rgbShiftPass),toScreen=new THREE.ShaderPass(THREE.CopyShader),toScreen.renderToScreen=!0,composer.addPass(toScreen),controll.init(),animate()},controll={attractors:[],lines:[],geometry:{},parameters:[],closeValues:[],init:function(){this.geometry=new AttractorGeometryClass;for(var e=0;e<2;e++)this.attractors.push(new AttractorPointCloudClass(this.geometry.returnGeometry(),scene)),this.lines.push(new AttractorLineClass(scene));for(var e=0;e<2;e++)this.attractors[e].add(),this.lines[e].add();this.parametersInit()},parametersInit:function(){for(var e=0;e<3;e++)this.parameters.push({p:{x:0,y:0,z:0},r:{x:0,y:0,z:0},s:{x:0,y:0,z:0}}),this.closeValues.push({position:{x:new closeValueClass(200,400),y:new closeValueClass(200,400),z:new closeValueClass(200,400),t:new closeValueClass(200,400)},rotation:{x:new closeValueClass(200,700),y:new closeValueClass(200,700),z:new closeValueClass(200,700),t:new closeValueClass(300,500)},scale:{s:new closeValueClass(500,1e3),t:new closeValueClass(400,700)},line:new closeValueClass(50,100)});this.geometry.generate()},update:function(){audioInitFlg?this.geometry.change(audioInstance.getVolume(audioInstance.context.currentTime)[0]):this.geometry.change(this.closeValues[0].rotation.z.execution()),this.geometry.generate();for(var e=[],t=[],i=[],a=[],n=[],o=[],s=[],r=[],l=[],c=[],f=0;f<3;f++)e[f]=this.closeValues[f].position.x.execution(),t[f]=this.closeValues[f].position.y.execution(),i[f]=this.closeValues[f].position.z.execution(),a[f]=this.closeValues[f].position.t.execution(),n[f]=this.closeValues[f].rotation.x.execution(),o[f]=this.closeValues[f].rotation.y.execution(),s[f]=this.closeValues[f].rotation.z.execution(),r[f]=this.closeValues[f].rotation.t.execution(),l[f]=this.closeValues[f].scale.s.execution(),c[f]=this.closeValues[f].scale.t.execution();for(var f=0;f<2;f++)if(volume=audioInitFlg?audioInstance.getVolume(audioInstance.context.currentTime)[f]:2*Math.random()-1,volume>.075||-.075>volume){if(f%2===0)var h=-1;else var h=1;a[f]>.8?this.parameters[f].p.x=100*volume*h:this.parameters[f].p.x=50*h,this.parameters[f].p.y=0,this.parameters[f].p.z=0,volume>.2||(r[2]>.3?(this.parameters[f].r.x=6.28*n[2],this.parameters[f].r.y=6.28*h*o[2],this.parameters[f].r.z=6.28*h*s[2]):r[2]>0&&(this.parameters[f].r.x=6.28*n[f],this.parameters[f].r.y=6.28*h*o[f],this.parameters[f].r.z=6.28*h*s[f])),Math.max(volume,Math.abs(volume))>.3?(this.parameters[f].s.x+=(300*h*volume+300*h-this.parameters[f].s.x)/8,this.parameters[f].s.y+=(300*volume+300-this.parameters[f].s.y)/8,this.parameters[f].s.z+=(300*volume+300-this.parameters[f].s.z)/8):Math.max(volume,Math.abs(volume))>.15?(this.parameters[f].s.x=100*l[f]*h+250*h,this.parameters[f].s.y=100*l[f]+250,this.parameters[f].s.z=100*l[f]+250):(this.parameters[f].s.x=200*h,this.parameters[f].s.y=this.parameters[f].s.z=200),this.attractors[f].update({position:{x:this.parameters[f].p.x,y:this.parameters[f].p.y,z:this.parameters[f].p.z},rotation:{x:this.parameters[f].r.x,y:this.parameters[f].r.y,z:this.parameters[f].r.z},scale:{x:this.parameters[f].s.x,y:this.parameters[f].s.y,z:this.parameters[f].s.z}}),Math.random()>.3?this.lines[f].material.opacity=.4:this.lines[f].material.opacity=0,this.lines[f].createVertices(this.geometry.geometry),this.lines[f].update({position:{x:this.parameters[f].p.x,y:this.parameters[f].p.y,z:this.parameters[f].p.z},rotation:{x:this.parameters[f].r.x,y:this.parameters[f].r.y,z:this.parameters[f].r.z},scale:{x:this.parameters[f].s.x,y:this.parameters[f].s.y,z:this.parameters[f].s.z}})}}},effect={RGBThCV:new closeValueClass(100,400),RGBamountCV:new closeValueClass(200,700),csTh:new closeValueClass(100,400),freqThCV:new closeValueClass(100,400),slideCV:new closeValueClass(25,30),shakerCV:new closeValueClass(100,400),invertCV:new closeValueClass(50,150),update:function(){this.invertCV.execution()<.15*effectCoefficientX?invertPass.enabled=!0:invertPass.enabled=!1,this.csTh.execution()<.25*effectCoefficientX?(cutslideHorizonalPass.uniforms.freqRand.value=6*Math.floor(4*this.freqThCV.execution()),cutslideHorizonalPass.uniforms.slideRand.value=(.2*this.slideCV.execution()-.1)*effectCoefficientX,cutslideVerticalPass.uniforms.freqRand.value=6*Math.floor(6*this.freqThCV.execution()),cutslideVerticalPass.uniforms.slideRand.value=(.2*this.slideCV.execution()-.1)*effectCoefficientX):(cutslideHorizonalPass.uniforms.freqRand.value=0,cutslideHorizonalPass.uniforms.slideRand.value=0,cutslideVerticalPass.uniforms.freqRand.value=0,cutslideVerticalPass.uniforms.slideRand.value=0),effectCoefficientX*effectCoefficientY*this.shakerCV.execution()>3&&(shakerPass.uniforms.rand.value.x=.1*Math.random()-.05,shakerPass.uniforms.rand.value.y=.1*Math.random()-.05),this.RGBThCV.execution()<.25*effectCoefficientY?(rgbShiftPass.uniforms.ramount.value=.005*Math.floor(4*this.RGBamountCV.execution()),rgbShiftPass.uniforms.bamount.value=.005*-Math.floor(4*this.RGBamountCV.execution())):this.RGBThCV.execution()<.5*effectCoefficientY?(rgbShiftPass.uniforms.ramount.value=0,rgbShiftPass.uniforms.bamount.value=0):(rgbShiftPass.uniforms.ramount.value=.004,rgbShiftPass.uniforms.bamount.value=.004)}},animate=function(){effect.update(),controll.update(),composer.render(),requestAnimationFrame(animate)};src="https://assets.elijahshepard.com/es-main/ear-worms/tracks/elijah-shepard_montage-new.mp3",audioInstance=new AudioDataClass(src),audioInstance.init(audioInstance.play),initVisualizer();var sound=new Howl({src:["https://assets.elijahshepard.com/es-main/ear-worms/tracks/elijah-shepard_montage-new.mp3"],autoplay:!0,loop:!0,volume:.5});sound.play()}